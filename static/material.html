<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>啄木鸟风电维保系统</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="css/bootstrap.css"/>
    <script type="text/javascript" src="js/doTe.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.js"></script>
    <script src="js/db.js"></script>
    <link rel="StyleSheet" href="css/dtree.css" type="text/css" />
    <script type="text/javascript" src="js/dtree.js"></script>

    <style>
        html, body {
            height: 100%;
            overflow: hidden;
        }
        .d_dtree-scroll {
            width: 100%;
            height: 100%;
            overflow-y: scroll;
            overflow-x: scroll;
        }

        .d_panel {
            border-radius: 4px;
            background-color: #ffffff;
            border: 1px solid #dddddd;
            border-color: #e0e4e8;
        }
        .d_panel .heading {
            border-bottom: 1px solid #dddddd;
            padding: 10px 15px;
            color: #656565;
        }
        .d_panel .heading2 {
            border-bottom: 1px solid #dddddd;
            padding: 5px;
        }
        .d_panel .heading2 strong {
            padding-left: 10px;
        }

        .d_data_item {
            margin: 5px 15px;
            display: inline-block;
        }

        .d_data_item label {
            width: 60px;
            text-align:right;
        }
        .d_data_item div {
            border-radius: 4px;
            border: 1px solid #dddddd;
            display:inline-block;
            padding:5px 10px;
            margin:0px 5px;
            width:150px;
        }

        .d_detail {
            margin-right: 2px;
            margin-bottom: 10px;
        }

        .d_table {
            width: 100%;
        }
        .d_table thead > tr > th {
            text-align: center;
            background-color: #f0f0f0;
        }
        .d_table > tbody > tr:nth-child(2n) > td {
            background-color: #f5f5f5;
        }
        .d_table thead > tr > th, .d_table tbody > tr > td{
            padding: 2px 4px;
            vertical-align: top;
        }

        .table-hover > tbody > tr:hover > td, .table-hover > tbody > tr:hover > th {
            background-color: #f0f0f5 !important;
        }

        .d_rAngle {
            border-radius: 4px;
            border: 1px solid #dddddd;
            border-color: #e0e4e8;
        }

        .d_dItem {
            margin: 5px 15px;
            display: inline-block;
        }

        .d_dImage {
            margin-top: 5px;
            margin-bottom: 5px;
            margin-left: 15px;
            margin-right: 23px;
            display: inline-block;
        }

        input:focus {
            border-color: #66afe9;
            box-shadow: inset 0 1px 1px rgba(0,0,0,.075),0 0 8px rgba(102,175,233,.6);
        }

    </style> 
</head>
<body style="display: flex; flex-direction: row; align-items: stretch; padding:5px;">
    <section class="d_panel" style="width: 100px; margin: 10px; flex-shrink: 1; flex-grow:1;">
        <header class="heading">材料列表<div style="float: right;"><input class="d_rAngle" style="margin-right: 50px;"  type="text" placeholder="搜索" /><a href="#">添加</a></div></header>
        <div class="d_dtree-scroll" style="padding:5px;">
            <table id="item_table" class="d_table table-hover"></table>
        </div>
    </section>

    <div class="" style="overflow-y: scroll; overflow-x: scroll; width: 100px; margin: 10px; flex-shrink: 2; flex-grow: 1; ">
        <section id="d_baseinf" class="d_panel d_detail">
            <header class="heading">基本信息<div style="float: right;"><a href="#">编辑</a></div></header>
            <div id="tpl_baseinf" ></div>
        </section>
    </div>


    <script id="tpl_item_table" type="text/template">
        <thead><tr>
            {% for (var i in it.fields) { %}
            <th>{%=it.fields[i].title%}</th>
            {% } %}
        </tr></thead>
        <tbody>
            {% for (var i in it.data) { %}`11
            <tr>
                {% for (var j in it.fields) { %}
                <td>{%=it.data[i][it.fields[j].name]%}</td>
                {% } %}
            </tr>
            {% } %}
        </tbody>
    </script>

    <script type="text/javascript">
        var currow = -1;
        var tpl_formitem = {
        normal:doT.template("<div class=\"d_data_item\"><label>{%=it.title%}</label><div>{%=it.value%}</div></div>"),
        image:doT.template("<div class=\"d_rAngle d_dImage\" style=\"width: 216px; height: 140px; float: left;\"><img style=\"width: 216px; height: 140px;\" src=\"{%=it.idimg%}\" /></div>"),
        wide:doT.template("<div class=\"d_data_item\"><label>{%=it.title%}</label><div style=\"width:404px;\">{%=it.value%}</div></div>"),
        pwd:doT.template("<div class=\"d_data_item\"><label>密码</label><div style=\"text-align:right;\"><a>点击重置密码</a></div></div>")};

        $(function () {
            var tpl_item_table = doT.template(document.getElementById('tpl_item_table').innerHTML);
            $("#item_table").html(tpl_item_table(db_mat));
            $("tr").click(function () {
                if (currow != -1) {
                    currow++;
                    if (currow % 2 == 0)
                        $(this).parent().children(":nth-child(" + currow + ")").children().css("background-color", "#f5f5f5");
                    else
                        $(this).parent().children(":nth-child(" + currow + ")").children().css("background-color", "#ffffff");
                }
                currow = $(this).index();
                $(this).children().css("background-color", "#00f0f5");
                var data = db_mat.data[currow];
                var cnt = "";
                for (f in db_mat.fields) {
                    var field = db_mat.fields[f];
                    cnt += tpl_formitem[field.class]({ title: field.title, value: data[field.name] });
                }
                $("#tpl_baseinf").html(cnt);
            });
        });
    </script>
</body>
</html>