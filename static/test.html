<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>test</title>
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap.js"></script>
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/xpecker.css" />
    <script src="js/xpecker.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/db.js"></script>
    <link rel="stylesheet" href="css/xpecker.css" />
    <script src="js/xpecker.js"></script>
    <script src="js/Cube.js"></script>

    <style>
        /*图片框无图时的背景十字架图片*/
        .imagelistlive {}
        .imagelistlive>label {
            background: url(img/add2.png);
            background-size: 50% 50%;
            background-repeat: no-repeat;
            background-position: center center;
            display: inline-block;
            margin: 0px;
            width: 200px; height: 150px;
        }
        .imagelistlive>label>input {
            display: none;
        }
    </style>
</head>
<body>
    <script type="text/javascript">

        var fields = [
            { "title": "标识", "name": "id", "forder": "-1", "ftype": "none" },
            { "title": "报修单号", "name": "code", "forder": "0", "ftype": "input" },
            { "title": "故障类别", "name": "fault_id", "forder": "1", "ftype": "input" },
            { "title": "报修人", "name": "report_id", "forder": "2", "ftype": "div" },
            { "title": "报修时间", "name": "reporttime", "forder": "5", "ftype": "date" },
            { "title": "联系电话", "name": "phone", "forder": "3", "ftype": "input" },
            { "title": "报修单位", "name": "winder_id", "forder": "4", "ftype": "div" },
            { "title": "备注", "name": "remark", "forder": "6", "ftype": "textarea" },
            { "title": "状态", "name": "status", "ftype": "none" },
            { "title": "受理人", "name": "guide_id", "ftype": "none" },
            { "title": "受理时间", "name": "guidetime", "ftype": "none" },
        ]

        fields.push({ "title": "报修设备", "name": "devices", "forder": "2", "ftype": "div_long" }, );

        function xfieldsort(ar) {
            ar.forEach((x, i) => {
                if (!x.hasOwnProperty("forder"))
                    x.forder = "";
                if (x.forder == "") {
                    if (i == 0) x.forder = "0";
                    else x.forder = ar[i - 1].forder;
                }
            });
            for (var i = 0; i < ar.length; i++) {
                for (var j = i + 1; j < ar.length; j++) {
                    if (int(ar[i].forder) > int(ar[j].forder)) {
                        var t = ar[i];
                        ar[i] = ar[j];
                        ar[j] = t;
                    }
                }
            }
        }
        xfieldsort(fields);
        var data = Create(fields);
        data.devices = "qweqwe,asdasd,zxzxc,ewrwer,werwer,sdfsdf,erwert";
        data.winder_id = "xxx风场";
        data.report_id = "xxx驻场人";
        var html = RenderForm4(data, fields);
        html += xrimagelistlive([""]);
        $("body").append(html);


    </script>
</body>
</html>